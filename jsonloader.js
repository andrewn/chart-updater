gloader.load(["glow","1","glow.net"],{onLoad:function(A){bbc.fmtj.utils.createObject("bbc.fmtj.net.json.model");bbc.fmtj.net.json.model=(function(){var G="http://cdnedge.bbc.co.uk";var H="bbcfmtj";var D=0;var J=[];var F=[];var E=[];return{registerRenderer:function(M){var L=M();if(this.getRenderer(L.id)===null){E.push(L);for(var K in F){if(F[K].renderer.id===L.id){A.ready(function(){if(L.initialise){L.initialise(F[K].id)}if(F[K].object.getDataOnLoad===true){bbc.fmtj.net.json.model.getFeedByDataSource(F[K].object.dataSource).getData(0)}})}}}},start:function(){for(var K in J){if(J.hasOwnProperty(K)){J[K].createUpdateTimer()}}},stop:function(){for(var K in J){if(J.hasOwnProperty(K)){J[K].clearUpdateTimer()}}},startFeedById:function(L){for(var K in J){if(J[K].id==L){J[K].createUpdateTimer()}}},stopFeedById:function(L){for(var K in J){if(J[K].id==L){J[K].clearUpdateTimer()}}},getData:function(O){var M=this.getFeedByDataSource(O);if(M._isUpdating){return }M._isUpdating=true;var N="{url}{separator}{callbackName}={callbackFunction}&client={clientName}&cachebuster=cb{randomNumber}";var K={url:M.dataSource,separator:(M.dataSource.indexOf("?")>0?"&":"?"),callbackName:M.callbackName,callbackFunction:"bbc.fmtj.net.json.model.getFeedById("+M.id+").callback",randomNumber:[new Date().getTime(),parseInt(Math.random()*100000)].join(""),clientName:H};var L=A.net.loadScript(A.lang.interpolate(N,K),{useCache:true});window.setTimeout(function(){L.destroy();C(M.dataSource)},60000)},getFeedByDataSource:function(L){for(var K in J){if(J[K].dataSource==L){return J[K]}}L=bbc.fmtj.utils.prefixUrl(L,G);for(var K in J){if(J[K].dataSource==L){return J[K]}}return null},getFeedById:function(L){for(var K in J){if(J[K].id==L){return J[K]}}return null},getModule:function(L){for(var K in F){if(F[K].id==L){return F[K]}}return null},getRenderer:function(L){for(var K in E){if(E[K].id==L){return E[K]}}return null},addModule:function(M){var K=M.renderer;var N=M.moduleObject;var L=M.feedObject;if(K===null){alert("Renderer not specified");return }if(N===null){alert("Module Object not specified");return }if(L===null){alert("Feed Object not specified");return }L.dataSource=bbc.fmtj.utils.prefixUrl(L.dataSource,G);B(K,N,L)},purgeJSONScriptTags:C};function C(O){var L=A.dom.get("script");var K=L.length;var N;for(var M=0;M<K;M++){N=A.dom.get(L[M]);if(N.attr("src")){if(N.attr("src").search(O)!=-1){N.remove()}}}}function B(N,P,O){P.getDataOnLoad=O.getDataOnLoad;P.dataSource=O.dataSource;var K=bbc.fmtj.net.json.module.createModule(N,P);var L=bbc.fmtj.net.json.model.getFeedByDataSource(O.dataSource);if(L===null){var M=bbc.fmtj.net.json.feed.createFeed(D++,O);if(O.getDataOnLoad!=true){M.createUpdateTimer()}I(M);L=M}else{if(L.getUpdatePeriod()>O.updatePeriod){L.setUpdatePeriod(O.updatePeriod);L.clearUpdateTimer();L.createUpdateTimer()}}bbc.fmtj.net.json.model.getFeedByDataSource(O.dataSource).registerModule(P.id);if(bbc.fmtj.net.json.model.getRenderer(N.id)===null){A.net.loadScript(N.src)}F.push(K)}function I(K){if(bbc.fmtj.net.json.model.getFeedByDataSource(K.dataSource)===null){J.push(K)}}})()}});bbc.fmtj.utils.createObject("bbc.fmtj.net.json.feed");bbc.fmtj.net.json.feed=(function(){return{createFeed:function(C,B){var A=0;return{id:C,dataSource:B.dataSource,callbackName:(B.callbackName?B.callbackName:"jsoncallback"),useRequestId:(B.useRequestId===false?B.useRequestId:true),_updateTimer:null,_callbackTimeoutTimer:null,_updatePeriod:B.updatePeriod*1000,_initialUpdatePeriod:B.updatePeriod*1000,_lastUpdated:null,_isUpdating:false,_isPaused:false,_modules:[],setUpdatePeriod:function(D){this._updatePeriod=parseInt(D)*1000},getUpdatePeriod:function(){return(this._updatePeriod/1000)},getData:function(){this.createCallbackTimeoutTimer(C);bbc.fmtj.net.json.model.getData(this.dataSource)},createUpdateTimer:function(){if(this._isUpdating||this._isPaused){return }var D=this;this._updateTimer=setTimeout(function(){D.getData()},this._updatePeriod)},clearUpdateTimer:function(){clearTimeout(this._updateTimer);this._updateTimer=null;this._isUpdating=false},createCallbackTimeoutTimer:function(E){var D=this;this._callbackTimeoutTimer=setTimeout(function(){D.callbackTimeout(E)},30000)},clearCallbackTimeoutTimer:function(){clearTimeout(this._callbackTimeoutTimer);this._callbackTimeoutTimer=null},callbackTimeout:function(D){if(this._isUpdating){this._isUpdating=false;this.createUpdateTimer()}},callback:function(G,I){if(A++<120){for(var F=0;F<this._modules.length;F++){var E=bbc.fmtj.net.json.model.getModule(this._modules[F]);var H=bbc.fmtj.net.json.model.getRenderer(E.renderer.id);if(H===null){var D=this;setTimeout(function(){D.callback(G,I)},1000);return }}}A=0;this.clearCallbackTimeoutTimer();for(var F=0;F<this._modules.length;F++){var E=bbc.fmtj.net.json.model.getModule(this._modules[F]);var H=bbc.fmtj.net.json.model.getRenderer(E.renderer.id);H._hasUpdated=false;H.render(E.id,G);H.renderComplete(this.id)}this._isUpdating=false;this._lastUpdated=new Date();this.createUpdateTimer();if(G.config){if(G.config.stopAllPolling!=null){if(G.config.stopAllPolling===true){bbc.fmtj.net.json.model.stop()}}if(G.config.eventComplete!=null){if(G.config.eventComplete===true){this._isPaused=true}}if(G.config.globalRefreshRate!=null){if(G.config.globalRefreshRate!="(none)"){this.setUpdatePeriod(G.config.globalRefreshRate)}}if(G.config.globalRefreshRate==null&&this._updatePeriod!=this._initialUpdatePeriod){this._updatePeriod=this._initialUpdatePeriod}}},registerModule:function(D){if(this.getModule(D)===null){this._modules.push(D)}},getModule:function(E){for(var D in this._modules){if(this._modules[D].id==E){return this._modules[D]}}return null}}}}})();bbc.fmtj.utils.createObject("bbc.fmtj.net.json.module");bbc.fmtj.net.json.module=(function(){return{createModule:function(A,B){return{renderer:A,object:B,id:B.id}}}})();gloader.load(["glow","1","glow.anim","glow.dom","glow.tweens","glow.events"],{onLoad:function(A){bbc.fmtj.utils.createObject("bbc.fmtj.net.json.renderer");bbc.fmtj.net.json.renderer=(function(){return{createRendererBase:function(B){return{id:B,_hasUpdated:false,_utils:null,_json:null,renderComplete:function(){this._hasUpdated=false},_updateDetail:function(F){var C=F.selector;var E=F.value;var D=F.effect;if(E!==null&&A.dom.get(C).length>0){if(A.dom.get(C).html()!=E){A.dom.get(C).html(E);if(typeof D=="function"){D(C)}this._hasUpdated=true}}},_appendDetail:function(F){var C=F.selector;var E=F.value;var D=F.effect;if(E!==null&&A.dom.get(C).length>0){if(A.dom.get(C).html()!=E){A.dom.get(C).append(E);if(typeof D=="function"){D(C)}this._hasUpdated=true}}},getJSONValue:function(C,D){var E=this.checkJSONPropertyExists(C);if(E!==null){}else{if(arguments.length>1){E=D}else{E=""}}return E},checkJSONPropertyExists:function(G){var D=true;var F=G.split(".");var J=this._json;for(i=0;i<F.length;i++){var C=F[i].indexOf("[");if(C>0){var E=/\[([0-9]*)\]/;var I=F[i].substr(0,C);var H=E.exec(F[i])[1];J=J[I];J=J[H]}else{J=J[F[i]]}D=(typeof J!="undefined");if(!D){return null}}return J},calculateAwayPercentage:function(D){var E=this.getJSONValue(D);var C=100-(E);return C},calculatePercentageBar:function(C,G){var F=parseInt(C,10);var E=parseInt(G,10);var D;if(F==0&&E==0){D=50}else{D=(F/(F+E))*100}return D},_updateStatsBar:function(D){var E=D.bar1Name;var C=D.bar1Percent;var K=D.effect;var J=A.dom.get(E).parent().width();var H=Math.round(C/100*J);var G=A.dom.get(E).width();var F=G-1;var I=G+1;if(H<F||H>I){this._hasUpdated=true;if(typeof K=="function"){K(E,H)}}},updatePlayer:function(E,C){var D="#"+C+"Player"+E.number;var F="";if(E.yellowCard){F+=YELLOW_CARD}if(E.redCard){F+=RED_CARD}A.dom.get(D+"Cards").html(F)},highlightRed:function(C){var E=A.dom.get(C);var D=E.attr("fmtjOriginalColor");if(D===null){D=A.dom.get(C).css("color");E.attr("fmtjOriginalColor",D)}A.anim.css(E,5,{color:{from:"#CC0000",to:D}}).start()},moveStatusBar:function(C,D){A.anim.css(C,2,{width:{to:D}},{tween:A.tweens.easeBoth(2)}).start()},loader:function(D,C){A.dom.get(D).append('<img id=/"loader/" src=/"http://newsimg.bbc.co.uk/sol/shared/img/v4/icons/loading.gif"></img>');setTimeout(function(){A.dom.get(".loader").remove()},C)},_itemRendererDisplayLoading:function(C,E,D){var F=function(){D.get("li").removeClass("first");C.addClass("first");C.css("display","block").css("height","0px");A.anim.css(C,0.5,{height:{to:"28px"}},{tween:A.tweens.easeOut()}).start();var G=C.css("background-color");C.append('<div class="updating" style="padding: 4px 0px 0 5px; background-image:url(\'http://newsimg.bbc.co.uk/sol/shared/img/v4/icons/loading.gif\');background-repeat: no-repeat;background-position:75px 90%;"><strong style="background-color:'+G+'">Updating </strong></div>');A.anim.css(C.get(".updating"),1,{opacity:{to:1}}).start()};return F},_itemRendererDisplayNewData:function(C,D){var E=function(){var J=C;var I=C.get("div");I.html(D);I.css("opacity",0).css("zoom",1)[0];var H=J[0].style.height;var F=J.css("visibility","hidden").css("position","relative").css("height","auto")[0].offsetHeight;J.css("visibility","").css("position","").css("height",H);var G=A.anim.css(C,0.5,{height:{to:F}},{tween:A.tweens.easeOut()});A.events.addListener(G,"complete",function(){J.css("height",F);A.anim.css(C,0.5,{"background-color":{from:"#EFEFEF",to:"#FFFFFF"}}).start();I.css("background-color","#fff")});G.start()};return E},_itemRendererFadeInText:function(C,E){var D=function(){var G=C.get("div");G.css("background-color","#fff");var F=A.anim.css(G,0.5,{opacity:{to:1}}).start();A.events.addListener(F,"complete",function(){C.html(E);C.removeAttr("style")})};return D},_itemRendererRemoveLoading:function(C,D){var E=function(){var F=C.get(".updating");A.anim.css(F,0.5,{opacity:{to:0}}).start();F.remove()};return E},createAnim:function(E){var F=E.selector;var G=E.commentHtml;var D=E.effects;var I=[];var C=E.container;for(var J in D){if(D.hasOwnProperty(J)){var K=D[J];if(typeof K.name=="function"){var H=K.name(F,G,C);I.push(H);I.push(K.duration)}}}return I},getFullHeight:function(E){var D=E[0].style.height;var C=E.css("visibility","hidden").css("position","absolute").css("height","auto")[0].offsetHeight;E.css("visibility","").css("position","").css("height",D);return C},matchStatusLookup:function(C){var E="";var D="";switch(C){case"LIVE":E="L";D="Live";break;case"RESULT":E="R";D="Result";break;case"HALFTIME":E="HT";D="Half Time";break;case"FULLTIME":E="FT";D="Full Time";break;case"EXTRATIME":E="ET";D="Extra Time";break;case"EXTRATIMEHALFTIME":E="ETH";D="Extra Time Half Time";break;case"EXTRATIMEFULLTIME":E="ETF";D="Extra Time Full Time";break;case"FIXTURE":E="F";D="Fixture"}return{shortText:E,fullText:D}}}}}})();bbc.fmtj.net.json.isReady=true;bbc.fmtj.queue.callback("bbc.fmtj.net.json.model.addModule")}});